INFO:root:Data Retrieval: Fetching data from 2020-01-01 to 2025-01-01
INFO:crypto_tax:[Kraken] Retrieving trades {"start_date": "2020-01-01", "end_date": "2025-01-01"}
INFO:crypto_tax:[Database] Connection opened to Kraken cache database 
INFO:crypto_tax:[Database] Connection closed to Kraken cache database 
INFO:crypto_tax:[Database] Retrieved 0 entries from trades {"start_time": 1577833200, "end_time": 1735686000}
INFO:crypto_tax:[Kraken] Retrieved 0 cached trades 
INFO:crypto_tax:[Kraken API] Fetching trades {"from": "2020-01-01"}
INFO:crypto_tax:[API] [2025-04-20 19:59:57.158] Requesting token for /0/private/TradesHistory 
INFO:crypto_tax:[API] [2025-04-20 19:59:57.158] Got token for /0/private/TradesHistory 
INFO:crypto_tax:[API] [2025-04-20 19:59:57.450] Received response for /0/private/TradesHistory 
INFO:crypto_tax:[API] API call to Kraken - /0/private/TradesHistory {"method": "POST", "endpoint": "/0/private/TradesHistory", "success": true, "params": {"nonce": "1745171997158769", "ofs": 0, "start": 1577833200, "end": 1735686000, "trades": "true"}, "response_code": 200, "duration_ms": 291.3200855255127}
INFO:crypto_tax:[Kraken API] Fetched 5 new trades 
INFO:crypto_tax:[Database] Connection opened to Kraken cache database 
INFO:crypto_tax:[Database] Connection closed to Kraken cache database 
INFO:crypto_tax:[Database] Saved 5 entries to trades {"total_entries": 5}
INFO:crypto_tax:[Kraken] Retrieving ledger entries {"start_date": "2020-01-01", "end_date": "2025-01-01"}
INFO:crypto_tax:[Database] Connection opened to Kraken cache database 
INFO:crypto_tax:[Database] Connection closed to Kraken cache database 
INFO:crypto_tax:[Database] Retrieved 0 entries from ledger {"start_time": 1577833200, "end_time": 1735686000}
INFO:crypto_tax:[Kraken] Retrieved 0 cached ledger entries 
INFO:crypto_tax:[Kraken API] Fetching ledger entries {"from": "2020-01-01"}
INFO:crypto_tax:[API] [2025-04-20 19:59:57.466] Requesting token for /0/private/Ledgers 
INFO:crypto_tax:[API] [2025-04-20 19:59:57.467] Got token for /0/private/Ledgers 
INFO:crypto_tax:[API] [2025-04-20 19:59:57.592] Received response for /0/private/Ledgers 
INFO:crypto_tax:[API] API call to Kraken - /0/private/Ledgers {"method": "POST", "endpoint": "/0/private/Ledgers", "success": true, "params": {"nonce": "1745171997466959", "ofs": 0, "start": 1577833200, "end": 1735686000, "type": "all"}, "response_code": 200, "duration_ms": 124.90630149841309}
INFO:crypto_tax:[API] [2025-04-20 19:59:58.153] Requesting token for /0/private/Ledgers 
INFO:crypto_tax:[API] [2025-04-20 19:59:58.153] Got token for /0/private/Ledgers 
INFO:crypto_tax:[API] [2025-04-20 19:59:58.315] Received response for /0/private/Ledgers 
INFO:crypto_tax:[API] API call to Kraken - /0/private/Ledgers {"method": "POST", "endpoint": "/0/private/Ledgers", "success": true, "params": {"nonce": "1745171998153169", "ofs": 50, "start": 1577833200, "end": 1735686000, "type": "all"}, "response_code": 200, "duration_ms": 161.56291961669922}
INFO:crypto_tax:[Kraken API] Fetched 53 new ledger entries 
INFO:crypto_tax:[Database] Connection opened to Kraken cache database 
INFO:crypto_tax:[Database] Connection closed to Kraken cache database 
INFO:crypto_tax:[Database] Saved 53 entries to ledger {"total_entries": 53}
INFO:root:Data Retrieval: Retrieved 5 trades and 53 ledger entries
INFO:crypto_tax:[API] API call to Kraken - Fetching price for XETH on 14-08-2023 {"method": "GET", "endpoint": "Fetching price for XETH on 14-08-2023", "success": true}
INFO:crypto_tax:[API] [2025-04-20 19:59:58.333] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 19:59:58.333] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 19:59:58.522] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "ETHEUR", "interval": 1440, "since": 1691971200}, "response_code": 200, "duration_ms": 188.6920928955078}
INFO:crypto_tax:[API] API call to CoinGecko - Fetching price for XETH on 14-08-2023 {"method": "GET", "endpoint": "Fetching price for XETH on 14-08-2023", "success": true}
WARNING: [Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for XETH on 14-08-2023 - exceeds 365 day limit for free API 
WARNING:crypto_tax:[Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for XETH on 14-08-2023 - exceeds 365 day limit for free API 
INFO:crypto_tax:[API] API call to Yahoo Finance - Fetching price for XETH on 14-08-2023 {"method": "GET", "endpoint": "Fetching price for XETH on 14-08-2023", "success": true}
INFO:crypto_tax:[Price] Got Yahoo Finance price for XETH on 14-08-2023: 1680.732421875 EUR 
--- Logging error ---
Traceback (most recent call last):
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 1150, in emit
    msg = self.format(record)
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 998, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 711, in format
    record.message = record.getMessage()
                     ~~~~~~~~~~~~~~~~~^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 400, in getMessage
    msg = msg % self.args
          ~~~~^~~~~~~~~~~
TypeError: not all arguments converted during string formatting
Call stack:
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "/home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/main.py", line 593, in <module>
    main()
  File "/home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/main.py", line 533, in main
    log_event("FeeLink", f"Trade {refid} combined fee: {combined_fee}")
Message: 'FeeLink'
Arguments: ('Trade T3UUUC-5OKUR-CKCQTM combined fee: 2.58815',)
--- Logging error ---
Traceback (most recent call last):
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 1150, in emit
    msg = self.format(record)
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 998, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 711, in format
    record.message = record.getMessage()
                     ~~~~~~~~~~~~~~~~~^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 400, in getMessage
    msg = msg % self.args
          ~~~~^~~~~~~~~~~
TypeError: not all arguments converted during string formatting
Call stack:
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "/home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/main.py", line 593, in <module>
    main()
  File "/home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/main.py", line 533, in main
    log_event("FeeLink", f"Trade {refid} combined fee: {combined_fee}")
Message: 'FeeLink'
Arguments: ('Trade TFJXYS-7T7L5-KEYW5E combined fee: 0.630846',)
--- Logging error ---
Traceback (most recent call last):
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 1150, in emit
    msg = self.format(record)
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 998, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 711, in format
    record.message = record.getMessage()
                     ~~~~~~~~~~~~~~~~~^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 400, in getMessage
    msg = msg % self.args
          ~~~~^~~~~~~~~~~
TypeError: not all arguments converted during string formatting
Call stack:
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "/home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/main.py", line 593, in <module>
    main()
  File "/home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/main.py", line 533, in main
    log_event("FeeLink", f"Trade {refid} combined fee: {combined_fee}")
Message: 'FeeLink'
Arguments: ('Trade TQP4L3-Q5R2O-4CQ3U4 combined fee: 0.009154',)
--- Logging error ---
Traceback (most recent call last):
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 1150, in emit
    msg = self.format(record)
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 998, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 711, in format
    record.message = record.getMessage()
                     ~~~~~~~~~~~~~~~~~^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 400, in getMessage
    msg = msg % self.args
          ~~~~^~~~~~~~~~~
TypeError: not all arguments converted during string formatting
Call stack:
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "/home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/main.py", line 593, in <module>
    main()
  File "/home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/main.py", line 533, in main
    log_event("FeeLink", f"Trade {refid} combined fee: {combined_fee}")
Message: 'FeeLink'
Arguments: ('Trade T6WBV3-XPEJ7-UU4RSR combined fee: 0.12178400',)
--- Logging error ---
Traceback (most recent call last):
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 1150, in emit
    msg = self.format(record)
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 998, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 711, in format
    record.message = record.getMessage()
                     ~~~~~~~~~~~~~~~~~^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 400, in getMessage
    msg = msg % self.args
          ~~~~^~~~~~~~~~~
TypeError: not all arguments converted during string formatting
Call stack:
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "/home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/main.py", line 593, in <module>
    main()
  File "/home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/main.py", line 533, in main
    log_event("FeeLink", f"Trade {refid} combined fee: {combined_fee}")
Message: 'FeeLink'
Arguments: ('Trade TGG6NO-OI6UY-I3KUHR combined fee: 1.29887',)
INFO:root:Processing: Starting transaction processing for tax year 2024...
INFO:root:Processing: Sorted 58 raw transactions.
INFO:root:Skipping fiat currency transaction: LJZ4BA-KTVD6-2N3AET (deposit ZEUR)
INFO:root:Skipping fiat payment transaction: LQ62JS-ER5LL-7VG4MA (spend ZEUR)
INFO:root:Skipping fiat payment transaction: L22CSF-KGGWB-H5E2EP (spend ZEUR)
INFO:root:Skipping fiat payment transaction: LUMGAS-NZN32-25N3SA (spend ZEUR)
INFO:root:Skipping fiat currency transaction: LWG2GS-Z7NJP-RYY5QQ (deposit ZEUR)
INFO:root:Skipping fiat payment transaction: LRRWYD-2I7FE-BX3YSX (spend ZEUR)
INFO:root:Skipping fiat payment transaction: LHFHLG-7KZBM-KRC53V (spend ZEUR)
INFO:root:Skipping fiat currency transaction: LK3ETF-6XPMS-FBG724 (deposit ZEUR)
INFO:root:Skipping fiat currency transaction: LXH63E-6FB5E-UIBU5B (trade ZEUR)
INFO:root:Processing: Processing crypto sale transaction: L6J6C3-ZTK7A-7TIMDK (trade XETH)
INFO:root:Skipping fiat currency transaction: LTG7BB-IDTLJ-V5H5XO (trade ZEUR)
INFO:root:Processing: Processing crypto sale transaction: LQ23RC-J74M5-Z4VAXM (trade ARB)
INFO:root:Skipping fiat currency transaction: LIBGPF-QNPQG-J3ITFA (trade ZEUR)
INFO:root:Processing: Processing crypto sale transaction: LDCCD6-I3JHH-IJMLOU (trade ADA)
INFO:root:Skipping fiat currency transaction: L6VWSP-7KEAK-K6LRRY (trade ZEUR)
INFO:root:Processing: Processing crypto sale transaction: L6U3YH-W2DT5-5BJRKV (trade ADA)
INFO:root:Skipping fiat payment transaction: LQ75IJ-QTSK2-H5VW2J (spend ZEUR)
INFO:root:Skipping fiat currency transaction: LHODTV-OB7S7-WDM2ZH (deposit ZEUR)
INFO:root:Skipping fiat payment transaction: LO5CEK-VIXHP-BXFDKJ (spend ZEUR)
INFO:root:Skipping fiat payment transaction: LDRPM5-X3G7O-36NOZ3 (spend ZEUR)
INFO:root:Skipping fiat payment transaction: LNLQLT-47ZQB-X2LLAS (spend ZEUR)
INFO:root:Skipping fiat currency transaction: LFSHAH-WFEAK-O3WV4Y (deposit ZEUR)
INFO:root:Processing: Processing crypto sale transaction: LB2APU-M645J-SYYVNG (trade XETH)
INFO:root:Skipping fiat currency transaction: LB6CIB-QVOBP-AYDZIH (trade ZEUR)
INFO:root:Skipping fiat currency transaction: LDE3ZQ-W25AP-ZPEBNI (receive ZEUR)
INFO:root:Processing: Processing crypto sale transaction: LINGB3-WZ2QZ-PLQWZ5 (spend XETH)
INFO:root:Skipping fiat payment transaction: LPMA4F-HNIRQ-SWIBVL (withdrawal ZEUR)
INFO:root:Skipping fiat currency transaction: L6NLKG-YKWWB-DEVNUT (receive ZEUR)
INFO:root:Processing: Processing crypto sale transaction: LEVU23-MZZJG-Q4VLVQ (spend ADA)
INFO:root:Skipping fiat payment transaction: LIEOEX-EEUUD-WA2BHO (withdrawal ZEUR)
INFO:root:Skipping fiat currency transaction: LTIJFJ-QIP3Y-XU55CY (receive ZEUR)
INFO:root:Processing: Processing crypto sale transaction: LU4N27-QT7QR-US5PBA (spend AVAX)
INFO:root:Skipping fiat payment transaction: LTJJ3O-LWO2U-3YJ4O2 (withdrawal ZEUR)
INFO:root:Skipping fiat currency transaction: LDX3R3-WLAVW-BSD4IF (receive ZEUR)
INFO:root:Processing: Processing crypto sale transaction: LJC3TF-S3X4H-G6MWWN (spend XETH)
INFO:root:Skipping fiat currency transaction: LJ6AUP-45VQQ-RI24Z3 (receive ZEUR)
INFO:root:Processing: Processing crypto sale transaction: LL3RIA-PCIBK-57YB77 (spend ADA)
INFO:root:Skipping fiat currency transaction: LI55MI-GHC7H-W5B5AK (receive ZEUR)
INFO:root:Processing: Processing crypto sale transaction: LLUIJV-CZIDY-N4VJ3N (spend ARB)
INFO:root:Skipping fiat payment transaction: LSCR53-KBGXA-LOXMTZ (withdrawal ZEUR)
INFO:root:Skipping fiat currency transaction: LF3GSP-ZRZDD-IHDXNY (deposit ZEUR)
INFO:root:Skipping fiat payment transaction: LBQTJ4-2NOQ4-OKEWN6 (spend ZEUR)
INFO:root:Processing: First pass - Adding purchases to FIFO calculator
INFO:crypto_tax:[API] API call to Kraken - Fetching price for XETH on 19-04-2022 {"method": "GET", "endpoint": "Fetching price for XETH on 19-04-2022", "success": true}
INFO:crypto_tax:[API] [2025-04-20 19:59:58.846] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 19:59:58.846] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 19:59:59.039] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "ETHEUR", "interval": 1440, "since": 1650326400}, "response_code": 200, "duration_ms": 192.65389442443848}
INFO:crypto_tax:[API] API call to CoinGecko - Fetching price for XETH on 19-04-2022 {"method": "GET", "endpoint": "Fetching price for XETH on 19-04-2022", "success": true}
WARNING: [Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for XETH on 19-04-2022 - exceeds 365 day limit for free API 
WARNING:crypto_tax:[Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for XETH on 19-04-2022 - exceeds 365 day limit for free API 
INFO:crypto_tax:[API] API call to Yahoo Finance - Fetching price for XETH on 19-04-2022 {"method": "GET", "endpoint": "Fetching price for XETH on 19-04-2022", "success": true}
INFO:crypto_tax:[Price] Got Yahoo Finance price for XETH on 19-04-2022: 2875.37109375 EUR 
INFO:crypto_tax:[API] API call to Kraken - Fetching price for ADA on 19-04-2022 {"method": "GET", "endpoint": "Fetching price for ADA on 19-04-2022", "success": true}
INFO:crypto_tax:[API] [2025-04-20 19:59:59.123] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 19:59:59.123] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 19:59:59.353] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "ADAEUR", "interval": 1440, "since": 1650326400}, "response_code": 200, "duration_ms": 230.30471801757812}
INFO:crypto_tax:[API] API call to CoinGecko - Fetching price for ADA on 19-04-2022 {"method": "GET", "endpoint": "Fetching price for ADA on 19-04-2022", "success": true}
WARNING: [Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for ADA on 19-04-2022 - exceeds 365 day limit for free API 
WARNING:crypto_tax:[Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for ADA on 19-04-2022 - exceeds 365 day limit for free API 
INFO:crypto_tax:[API] API call to Yahoo Finance - Fetching price for ADA on 19-04-2022 {"method": "GET", "endpoint": "Fetching price for ADA on 19-04-2022", "success": true}
INFO:crypto_tax:[Price] Got Yahoo Finance price for ADA on 19-04-2022: 0.8830839991569519 EUR 
INFO:crypto_tax:[API] API call to Kraken - Fetching price for SOL on 19-04-2022 {"method": "GET", "endpoint": "Fetching price for SOL on 19-04-2022", "success": true}
INFO:crypto_tax:[API] [2025-04-20 19:59:59.438] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 19:59:59.438] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 19:59:59.646] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "SOLEUR", "interval": 1440, "since": 1650326400}, "response_code": 200, "duration_ms": 207.7627182006836}
INFO:crypto_tax:[API] API call to CoinGecko - Fetching price for SOL on 19-04-2022 {"method": "GET", "endpoint": "Fetching price for SOL on 19-04-2022", "success": true}
WARNING: [Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for SOL on 19-04-2022 - exceeds 365 day limit for free API 
WARNING:crypto_tax:[Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for SOL on 19-04-2022 - exceeds 365 day limit for free API 
INFO:crypto_tax:[API] API call to Yahoo Finance - Fetching price for SOL on 19-04-2022 {"method": "GET", "endpoint": "Fetching price for SOL on 19-04-2022", "success": true}
INFO:crypto_tax:[Price] Got Yahoo Finance price for SOL on 19-04-2022: 100.58084106445312 EUR 
INFO:crypto_tax:[API] API call to Kraken - Fetching price for XETH on 28-12-2022 {"method": "GET", "endpoint": "Fetching price for XETH on 28-12-2022", "success": true}
INFO:crypto_tax:[API] [2025-04-20 19:59:59.725] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 19:59:59.725] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 19:59:59.922] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "ETHEUR", "interval": 1440, "since": 1672185600}, "response_code": 200, "duration_ms": 197.10326194763184}
INFO:crypto_tax:[API] API call to CoinGecko - Fetching price for XETH on 28-12-2022 {"method": "GET", "endpoint": "Fetching price for XETH on 28-12-2022", "success": true}
WARNING: [Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for XETH on 28-12-2022 - exceeds 365 day limit for free API 
WARNING:crypto_tax:[Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for XETH on 28-12-2022 - exceeds 365 day limit for free API 
INFO:crypto_tax:[API] API call to Yahoo Finance - Fetching price for XETH on 28-12-2022 {"method": "GET", "endpoint": "Fetching price for XETH on 28-12-2022", "success": true}
INFO:crypto_tax:[Price] Got Yahoo Finance price for XETH on 28-12-2022: 1119.576904296875 EUR 
INFO:crypto_tax:[API] API call to Kraken - Fetching price for ADA on 28-12-2022 {"method": "GET", "endpoint": "Fetching price for ADA on 28-12-2022", "success": true}
INFO:crypto_tax:[API] [2025-04-20 20:00:00.002] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:00.002] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:00.206] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "ADAEUR", "interval": 1440, "since": 1672185600}, "response_code": 200, "duration_ms": 204.31828498840332}
INFO:crypto_tax:[API] API call to CoinGecko - Fetching price for ADA on 28-12-2022 {"method": "GET", "endpoint": "Fetching price for ADA on 28-12-2022", "success": true}
WARNING: [Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for ADA on 28-12-2022 - exceeds 365 day limit for free API 
WARNING:crypto_tax:[Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for ADA on 28-12-2022 - exceeds 365 day limit for free API 
INFO:crypto_tax:[API] API call to Yahoo Finance - Fetching price for ADA on 28-12-2022 {"method": "GET", "endpoint": "Fetching price for ADA on 28-12-2022", "success": true}
INFO:crypto_tax:[Price] Got Yahoo Finance price for ADA on 28-12-2022: 0.23368200659751892 EUR 
INFO:crypto_tax:[API] API call to Kraken - Fetching price for MATIC on 20-04-2023 {"method": "GET", "endpoint": "Fetching price for MATIC on 20-04-2023", "success": true}
INFO:crypto_tax:[API] [2025-04-20 20:00:00.290] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:00.290] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:00.559] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "MATICEUR", "interval": 1440, "since": 1681948800}, "response_code": 200, "duration_ms": 269.3607807159424}
INFO:crypto_tax:[API] API call to CoinGecko - Fetching price for MATIC on 20-04-2023 {"method": "GET", "endpoint": "Fetching price for MATIC on 20-04-2023", "success": true}
WARNING: [Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for MATIC on 20-04-2023 - exceeds 365 day limit for free API 
WARNING:crypto_tax:[Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for MATIC on 20-04-2023 - exceeds 365 day limit for free API 
INFO:crypto_tax:[API] API call to Yahoo Finance - Fetching price for MATIC on 20-04-2023 {"method": "GET", "endpoint": "Fetching price for MATIC on 20-04-2023", "success": true}
INFO:crypto_tax:[Price] Got Yahoo Finance price for MATIC on 20-04-2023: 0.9912070035934448 EUR 
INFO:crypto_tax:[API] API call to Kraken - Fetching price for AVAX on 24-04-2023 {"method": "GET", "endpoint": "Fetching price for AVAX on 24-04-2023", "success": true}
INFO:crypto_tax:[API] [2025-04-20 20:00:00.641] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:00.641] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:00.957] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "AVAXEUR", "interval": 1440, "since": 1682294400}, "response_code": 200, "duration_ms": 315.26756286621094}
INFO:crypto_tax:[API] API call to CoinGecko - Fetching price for AVAX on 24-04-2023 {"method": "GET", "endpoint": "Fetching price for AVAX on 24-04-2023", "success": true}
WARNING: [Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for AVAX on 24-04-2023 - exceeds 365 day limit for free API 
WARNING:crypto_tax:[Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for AVAX on 24-04-2023 - exceeds 365 day limit for free API 
INFO:crypto_tax:[API] API call to Yahoo Finance - Fetching price for AVAX on 24-04-2023 {"method": "GET", "endpoint": "Fetching price for AVAX on 24-04-2023", "success": true}
INFO:crypto_tax:[Price] Got Yahoo Finance price for AVAX on 24-04-2023: 15.343591690063477 EUR 
INFO:crypto_tax:[API] API call to Kraken - Fetching price for ARB on 24-04-2023 {"method": "GET", "endpoint": "Fetching price for ARB on 24-04-2023", "success": true}
INFO:crypto_tax:[API] [2025-04-20 20:00:01.097] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:01.097] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:01.329] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "ARBEUR", "interval": 1440, "since": 1682294400}, "response_code": 200, "duration_ms": 231.59217834472656}
INFO:crypto_tax:[API] API call to CoinGecko - Fetching price for ARB on 24-04-2023 {"method": "GET", "endpoint": "Fetching price for ARB on 24-04-2023", "success": true}
WARNING: [Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for ARB on 24-04-2023 - exceeds 365 day limit for free API 
WARNING:crypto_tax:[Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for ARB on 24-04-2023 - exceeds 365 day limit for free API 
INFO:crypto_tax:[API] API call to Yahoo Finance - Fetching price for ARB on 24-04-2023 {"method": "GET", "endpoint": "Fetching price for ARB on 24-04-2023", "success": true}
ERROR:yfinance:$ARB-EUR: possibly delisted; no timezone found
WARNING: [Price] WARNING - NotFound: Could not find price for ARB on 24-04-2023 
WARNING:crypto_tax:[Price] WARNING - NotFound: Could not find price for ARB on 24-04-2023 
INFO:crypto_tax:[API] API call to Kraken - Fetching price for APT on 24-04-2023 {"method": "GET", "endpoint": "Fetching price for APT on 24-04-2023", "success": true}
INFO:crypto_tax:[API] [2025-04-20 20:00:02.793] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:02.793] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:03.032] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "APTEUR", "interval": 1440, "since": 1682294400}, "response_code": 200, "duration_ms": 238.8136386871338}
INFO:crypto_tax:[API] API call to CoinGecko - Fetching price for APT on 24-04-2023 {"method": "GET", "endpoint": "Fetching price for APT on 24-04-2023", "success": true}
WARNING: [Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for APT on 24-04-2023 - exceeds 365 day limit for free API 
WARNING:crypto_tax:[Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for APT on 24-04-2023 - exceeds 365 day limit for free API 
INFO:crypto_tax:[API] API call to Yahoo Finance - Fetching price for APT on 24-04-2023 {"method": "GET", "endpoint": "Fetching price for APT on 24-04-2023", "success": true}
ERROR:yfinance:404 Client Error: Not Found for url: https://query2.finance.yahoo.com/v10/finance/quoteSummary/APT-EUR?modules=financialData%2CquoteType%2CdefaultKeyStatistics%2CassetProfile%2CsummaryDetail&corsDomain=finance.yahoo.com&formatted=false&symbol=APT-EUR&crumb=0mOW2Xy0xIz
ERROR: [Price] ERROR - YahooFinanceError: Error fetching Yahoo Finance price for APT at 1682347393 | Exception: AttributeError: 'NoneType' object has no attribute 'update' 
ERROR:crypto_tax:[Price] ERROR - YahooFinanceError: Error fetching Yahoo Finance price for APT at 1682347393 | Exception: AttributeError: 'NoneType' object has no attribute 'update' 
ERROR: [Price] Traceback: Traceback (most recent call last):
  File "/home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/price_api.py", line 372, in _get_yfinance_price
    hist = ticker.history(start=start_date, end=end_date)
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/base.py", line 82, in history
    return self._lazy_load_price_history().history(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/base.py", line 88, in _lazy_load_price_history
    self._price_history = PriceHistory(self._data, self.ticker, self._get_ticker_tz(self.proxy, timeout=10))
                                                                ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/base.py", line 114, in _get_ticker_tz
    if k in self.info:
            ^^^^^^^^^
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/ticker.py", line 159, in info
    return self.get_info()
           ~~~~~~~~~~~~~^^
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/base.py", line 244, in get_info
    data = self._quote.info
           ^^^^^^^^^^^^^^^^
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/scrapers/quote.py", line 508, in info
    self._fetch_info(self.proxy)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/scrapers/quote.py", line 610, in _fetch_info
    result.update(self._fetch_additional_info(proxy))
    ^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'update'

ERROR:crypto_tax:[Price] Traceback: Traceback (most recent call last):
  File "/home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/price_api.py", line 372, in _get_yfinance_price
    hist = ticker.history(start=start_date, end=end_date)
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/utils.py", line 104, in wrapper
    result = func(*args, **kwargs)
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/base.py", line 82, in history
    return self._lazy_load_price_history().history(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/base.py", line 88, in _lazy_load_price_history
    self._price_history = PriceHistory(self._data, self.ticker, self._get_ticker_tz(self.proxy, timeout=10))
                                                                ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/base.py", line 114, in _get_ticker_tz
    if k in self.info:
            ^^^^^^^^^
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/ticker.py", line 159, in info
    return self.get_info()
           ~~~~~~~~~~~~~^^
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/base.py", line 244, in get_info
    data = self._quote.info
           ^^^^^^^^^^^^^^^^
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/scrapers/quote.py", line 508, in info
    self._fetch_info(self.proxy)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/home/mb/skripts/skripts-py/accounting_kryptos/venv/lib/python3.13/site-packages/yfinance/scrapers/quote.py", line 610, in _fetch_info
    result.update(self._fetch_additional_info(proxy))
    ^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'update'

WARNING: [Price] WARNING - NotFound: Could not find price for APT on 24-04-2023 
WARNING:crypto_tax:[Price] WARNING - NotFound: Could not find price for APT on 24-04-2023 
INFO:crypto_tax:[API] API call to Kraken - Fetching price for XETH on 06-11-2024 {"method": "GET", "endpoint": "Fetching price for XETH on 06-11-2024", "success": true}
INFO:crypto_tax:[API] [2025-04-20 20:00:04.448] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:04.449] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:04.581] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "ETHEUR", "interval": 1440, "since": 1730851200}, "response_code": 200, "duration_ms": 132.27605819702148}
INFO:crypto_tax:[API] API call to CoinGecko - Fetching price for XETH on 06-11-2024 {"method": "GET", "endpoint": "Fetching price for XETH on 06-11-2024", "success": true}
INFO:crypto_tax:[Price] Got CoinGecko price for XETH on 06-11-2024: 2216.2975932743243 EUR 
INFO:root:Processing: Added 15 purchases to FIFO calculator
INFO:root:Processing: Second pass - Processing sales
INFO:crypto_tax:[API] API call to Kraken - Fetching price for XETH on 04-01-2024 {"method": "GET", "endpoint": "Fetching price for XETH on 04-01-2024", "success": true}
INFO:crypto_tax:[API] [2025-04-20 20:00:04.914] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:04.914] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:05.138] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "ETHEUR", "interval": 1440, "since": 1704326400}, "response_code": 200, "duration_ms": 223.07872772216797}
INFO:crypto_tax:[API] API call to CoinGecko - Fetching price for XETH on 04-01-2024 {"method": "GET", "endpoint": "Fetching price for XETH on 04-01-2024", "success": true}
WARNING: [Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for XETH on 04-01-2024 - exceeds 365 day limit for free API 
WARNING:crypto_tax:[Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for XETH on 04-01-2024 - exceeds 365 day limit for free API 
INFO:crypto_tax:[API] API call to Yahoo Finance - Fetching price for XETH on 04-01-2024 {"method": "GET", "endpoint": "Fetching price for XETH on 04-01-2024", "success": true}
INFO:crypto_tax:[Price] Got Yahoo Finance price for XETH on 04-01-2024: 2023.3577880859375 EUR 
WARNING: [Fee] WARNING - EstimatedFee: Using estimated fee of 1.21944125773847534 EUR for XETH transaction LINGB3-WZ2QZ-PLQWZ5 
WARNING:crypto_tax:[Fee] WARNING - EstimatedFee: Using estimated fee of 1.21944125773847534 EUR for XETH transaction LINGB3-WZ2QZ-PLQWZ5 
INFO:crypto_tax:[API] API call to Kraken - Fetching price for ADA on 10-01-2024 {"method": "GET", "endpoint": "Fetching price for ADA on 10-01-2024", "success": true}
INFO:crypto_tax:[API] [2025-04-20 20:00:05.221] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:05.221] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:05.436] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "ADAEUR", "interval": 1440, "since": 1704844800}, "response_code": 200, "duration_ms": 215.00444412231445}
INFO:crypto_tax:[Price] Got Kraken price for ADA on 10-01-2024: 0.530188 EUR 
WARNING: [Fee] WARNING - EstimatedFee: Using estimated fee of 0.71906957931617200 EUR for ADA transaction LEVU23-MZZJG-Q4VLVQ 
WARNING:crypto_tax:[Fee] WARNING - EstimatedFee: Using estimated fee of 0.71906957931617200 EUR for ADA transaction LEVU23-MZZJG-Q4VLVQ 
INFO:crypto_tax:[API] API call to Kraken - Fetching price for AVAX on 09-05-2024 {"method": "GET", "endpoint": "Fetching price for AVAX on 09-05-2024", "success": true}
INFO:crypto_tax:[API] [2025-04-20 20:00:05.439] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:05.439] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:05.587] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "AVAXEUR", "interval": 1440, "since": 1715212800}, "response_code": 200, "duration_ms": 148.176908493042}
INFO:crypto_tax:[Price] Got Kraken price for AVAX on 09-05-2024: 31.37 EUR 
WARNING: [Fee] WARNING - EstimatedFee: Using estimated fee of 0.497207284900000 EUR for AVAX transaction LU4N27-QT7QR-US5PBA 
WARNING:crypto_tax:[Fee] WARNING - EstimatedFee: Using estimated fee of 0.497207284900000 EUR for AVAX transaction LU4N27-QT7QR-US5PBA 
INFO:root:FIFO Error: Cannot match lots for 0.4516100000 XETH (Ref: LJC3TF-S3X4H-G6MWWN) - Attempting to fetch more data
INFO:root:Fetching all trades for XETH from 2010-01-01
INFO:crypto_tax:[Kraken] Retrieving trades {"start_date": "2010-01-01", "end_date": "2024-05-23"}
INFO:crypto_tax:[Database] Connection opened to Kraken cache database 
INFO:crypto_tax:[Database] Connection closed to Kraken cache database 
INFO:crypto_tax:[Database] Retrieved 5 entries from trades {"start_time": 1262300400, "end_time": 1716488247}
INFO:crypto_tax:[Kraken] Retrieved 5 cached trades 
INFO:crypto_tax:[Kraken API] Fetching trades {"from": "2023-08-14"}
INFO:crypto_tax:[API] [2025-04-20 20:00:05.593] Requesting token for /0/private/TradesHistory 
INFO:crypto_tax:[API] [2025-04-20 20:00:05.593] Got token for /0/private/TradesHistory 
INFO:crypto_tax:[API] [2025-04-20 20:00:05.749] Received response for /0/private/TradesHistory 
INFO:crypto_tax:[API] API call to Kraken - /0/private/TradesHistory {"method": "POST", "endpoint": "/0/private/TradesHistory", "success": true, "params": {"nonce": "1745172005593581", "ofs": 0, "start": 1692023149, "end": 1716488247, "trades": "true"}, "response_code": 200, "duration_ms": 155.70449829101562}
INFO:crypto_tax:[Kraken API] Fetched 0 new trades 
INFO:crypto_tax:[Database] No entries to save to trades 
INFO:root:Fetching all ledger entries for XETH from 2010-01-01
INFO:crypto_tax:[Kraken] Retrieving ledger entries {"start_date": "2010-01-01", "end_date": "2024-05-23"}
INFO:crypto_tax:[Database] Connection opened to Kraken cache database 
INFO:crypto_tax:[Database] Connection closed to Kraken cache database 
INFO:crypto_tax:[Database] Retrieved 45 entries from ledger {"start_time": 1262300400, "end_time": 1716488247}
INFO:crypto_tax:[Kraken] Retrieved 45 cached ledger entries 
INFO:crypto_tax:[Kraken] Using cached ledger entries only (cache is up to date) 
INFO:crypto_tax:[Price] Using cached price for XETH on 19-04-2022: 2875.37109375 EUR 
INFO:root:Added additional purchase: 0.1194286700 XETH at 2875.37109375 EUR
INFO:crypto_tax:[Price] Using cached price for XETH on 28-12-2022: 1119.576904296875 EUR 
INFO:root:Added additional purchase: 0.4832533000 XETH at 1119.576904296875 EUR
INFO:crypto_tax:[API] API call to Kraken - Fetching price for XETH on 23-05-2024 {"method": "GET", "endpoint": "Fetching price for XETH on 23-05-2024", "success": true}
INFO:crypto_tax:[API] [2025-04-20 20:00:05.754] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:05.754] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:05.949] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "ETHEUR", "interval": 1440, "since": 1716422400}, "response_code": 200, "duration_ms": 195.25647163391113}
INFO:crypto_tax:[API] API call to CoinGecko - Fetching price for XETH on 23-05-2024 {"method": "GET", "endpoint": "Fetching price for XETH on 23-05-2024", "success": true}
INFO:crypto_tax:[Price] Got CoinGecko price for XETH on 23-05-2024: 3456.899841048827 EUR 
WARNING: [Fee] WARNING - EstimatedFee: Using estimated fee of 1.56117053721606076 EUR for XETH transaction LJC3TF-S3X4H-G6MWWN 
WARNING:crypto_tax:[Fee] WARNING - EstimatedFee: Using estimated fee of 1.56117053721606076 EUR for XETH transaction LJC3TF-S3X4H-G6MWWN 
INFO:crypto_tax:[API] API call to Kraken - Fetching price for ADA on 23-05-2024 {"method": "GET", "endpoint": "Fetching price for ADA on 23-05-2024", "success": true}
INFO:crypto_tax:[API] [2025-04-20 20:00:06.181] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:06.181] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:06.385] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "ADAEUR", "interval": 1440, "since": 1716422400}, "response_code": 200, "duration_ms": 204.14495468139648}
INFO:crypto_tax:[Price] Got Kraken price for ADA on 23-05-2024: 0.424228 EUR 
WARNING: [Fee] WARNING - EstimatedFee: Using estimated fee of 0.19178696986979600 EUR for ADA transaction LL3RIA-PCIBK-57YB77 
WARNING:crypto_tax:[Fee] WARNING - EstimatedFee: Using estimated fee of 0.19178696986979600 EUR for ADA transaction LL3RIA-PCIBK-57YB77 
INFO:crypto_tax:[API] API call to Kraken - Fetching price for ARB on 23-05-2024 {"method": "GET", "endpoint": "Fetching price for ARB on 23-05-2024", "success": true}
INFO:crypto_tax:[API] [2025-04-20 20:00:06.389] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:06.389] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:06.594] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "ARBEUR", "interval": 1440, "since": 1716422400}, "response_code": 200, "duration_ms": 204.97655868530273}
INFO:crypto_tax:[Price] Got Kraken price for ARB on 23-05-2024: 1.0688 EUR 
INFO:crypto_tax:[API] API call to Kraken - Fetching price for ARB on 24-04-2023 {"method": "GET", "endpoint": "Fetching price for ARB on 24-04-2023", "success": true}
INFO:crypto_tax:[API] [2025-04-20 20:00:06.597] Requesting token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:06.597] Got token for /0/public/OHLC 
INFO:crypto_tax:[API] [2025-04-20 20:00:06.726] Received response for /0/public/OHLC 
INFO:crypto_tax:[API] API call to Kraken - /0/public/OHLC {"method": "GET", "endpoint": "/0/public/OHLC", "success": true, "params": {"pair": "ARBEUR", "interval": 1440, "since": 1682294400}, "response_code": 200, "duration_ms": 128.2978057861328}
INFO:crypto_tax:[API] API call to CoinGecko - Fetching price for ARB on 24-04-2023 {"method": "GET", "endpoint": "Fetching price for ARB on 24-04-2023", "success": true}
WARNING: [Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for ARB on 24-04-2023 - exceeds 365 day limit for free API 
WARNING:crypto_tax:[Price] WARNING - CoinGeckoLimitation: Skipping CoinGecko API call for ARB on 24-04-2023 - exceeds 365 day limit for free API 
INFO:crypto_tax:[API] API call to Yahoo Finance - Fetching price for ARB on 24-04-2023 {"method": "GET", "endpoint": "Fetching price for ARB on 24-04-2023", "success": true}
ERROR:yfinance:$ARB-EUR: possibly delisted; no timezone found
WARNING: [Price] WARNING - NotFound: Could not find price for ARB on 24-04-2023 
WARNING:crypto_tax:[Price] WARNING - NotFound: Could not find price for ARB on 24-04-2023 
WARNING: [Price] WARNING - MissingPurchasePriceUsingDefault: Using default price of 1.0 EUR for ARB in lot L3EB3W-RSLGQ-YJVEUL 
WARNING:crypto_tax:[Price] WARNING - MissingPurchasePriceUsingDefault: Using default price of 1.0 EUR for ARB in lot L3EB3W-RSLGQ-YJVEUL 
WARNING: [Fee] WARNING - EstimatedFee: Using estimated fee of 0.184432128000 EUR for ARB transaction LLUIJV-CZIDY-N4VJ3N 
WARNING:crypto_tax:[Fee] WARNING - EstimatedFee: Using estimated fee of 0.184432128000 EUR for ARB transaction LLUIJV-CZIDY-N4VJ3N 
--- Logging error ---
Traceback (most recent call last):
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 1150, in emit
    msg = self.format(record)
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 998, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 711, in format
    record.message = record.getMessage()
                     ~~~~~~~~~~~~~~~~~^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.13/lib/python3.13/logging/__init__.py", line 400, in getMessage
    msg = msg % self.args
          ~~~~^~~~~~~~~~~
TypeError: not all arguments converted during string formatting
Call stack:
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "/home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/main.py", line 593, in <module>
    main()
  File "/home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/main.py", line 570, in main
    log_event("Fees", f"Total combined fees (trades + ledger, unique): {unique_fee_sum}")
Message: 'Fees'
Arguments: ('Total combined fees (trades + ledger, unique): 115.348974111914062',)
INFO:crypto_tax:[Export] Created German format tax report: export/krypto_steuer_2024.csv 
INFO:crypto_tax:[Export] Created FIFO Nachweis text report: export/fifo_nachweis_2024.txt 
INFO:crypto_tax:[Export] Successfully exported tax report in German format for year 2024 
INFO:root:Summary: Total tax liability for 2024: -2706.39514856928312 EUR
INFO:root:Summary: Total profit/loss for 2024: 1666.71260847122098 EUR
INFO:root:Export: Tax report exported to: export/krypto_steuer_2024.csv
Database initialized at /home/mb/skripts/skripts-py/accounting_kryptos/src/crypto_tax_calculator/../../data/kraken_cache.db
Fetching trades from Kraken...
Received 5 trades entries in this batch.
Received fewer trades than the limit, ending pagination.
Total trades found: 5
------------------------------
Fetching ledger from Kraken...
Received 50 ledger entries in this batch.
Received 3 ledger entries in this batch.
Received fewer ledger than the limit, ending pagination.
Total ledger found: 53
------------------------------
[LOG] FIFO Init: FifoCalculator initialized.
[LOG] FIFO Match: Matched 1.0000000000 XETH using holdings under 'XETH' (Ref: LINGB3-WZ2QZ-PLQWZ5)
[LOG] FIFO Match: Matched 1356.25396900 ADA using holdings under 'ADA' (Ref: LEVU23-MZZJG-Q4VLVQ)
[LOG] FIFO Match: Matched 15.8497700000 AVAX using holdings under 'AVAX' (Ref: LU4N27-QT7QR-US5PBA)
[LOG] FIFO Match: Matched 0.4516100000 XETH using holdings under 'XETH' (Ref: LJC3TF-S3X4H-G6MWWN)
Received 0 trades entries in this batch.
No more trades found.
[LOG] FIFO Match: Matched 0.4516100000 XETH using holdings under 'XETH' (Ref: LJC3TF-S3X4H-G6MWWN)
[LOG] FIFO Match: Matched 452.08465700 ADA using holdings under 'ADA' (Ref: LL3RIA-PCIBK-57YB77)
[LOG] FIFO Match: Matched 172.56000 ARB using holdings under 'ARB' (Ref: LLUIJV-CZIDY-N4VJ3N)
